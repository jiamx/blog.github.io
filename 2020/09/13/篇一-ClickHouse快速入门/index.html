<!DOCTYPE html><html lang="zh-CN"><head><meta name="generator" content="Hexo 3.9.0"><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description" content="记录朴实无华且枯燥的生活"><title>篇一|ClickHouse快速入门 | Jmx's Blog</title><link rel="stylesheet" type="text/css" href="/css/style.css?v=0.0.0"><link rel="stylesheet" type="text/css" href="//lib.baomitu.com/normalize/8.0.1/normalize.min.css"><link rel="stylesheet" type="text/css" href="//lib.baomitu.com/pure/1.0.0/pure-min.css"><link rel="stylesheet" type="text/css" href="//lib.baomitu.com/pure/1.0.0/grids-responsive-min.css"><link rel="stylesheet" href="//lib.baomitu.com/font-awesome/4.7.0/css/font-awesome.min.css"><script type="text/javascript" src="//lib.baomitu.com/jquery/3.4.0/jquery.min.js"></script><link rel="icon" mask sizes="any" href="/favicon.ico"><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"><link rel="alternate" type="application/atom+xml" href="/atom.xml"><script>var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = 'https://hm.baidu.com/hm.js?' + '912b6cfc43243cd27aeb428f7dbf7823';
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(hm, s);
  })();</script><script type="text/javascript" src="/js/toc.js?v=0.0.0"></script></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">篇一|ClickHouse快速入门</h1><a id="logo" href="/.">Jmx's Blog</a><p class="description">Keep it Simple and Stupid!</p></div><div id="nav-menu"><a class="current" href="/."><i class="fa fa-home"> 首页</i></a><a href="/archives/"><i class="fa fa-archive"> 归档</i></a><a href="/about/"><i class="fa fa-pied-piper-alt"> 关于</i></a><a href="/tags"><i class="fa fa-tags"> 标签</i></a><a href="/atom.xml"><i class="fa fa-rss"> 订阅</i></a></div></div><div class="pure-g" id="layout"><div class="pure-u-1 pure-u-md-3-4"><div class="content_container"><div class="post"><h1 class="post-title">篇一|ClickHouse快速入门</h1><div class="post-meta">Sep 13, 2020<span> | </span><span class="category"><a href="/categories/ClickHouse/">ClickHouse</a></span><script src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" async></script><span id="busuanzi_container_page_pv"> | <span id="busuanzi_value_page_pv"></span><span> 阅读</span></span><span class="post-time"><span class="post-meta-item-text"> | </span><span class="post-meta-item-icon"><i class="fa fa-keyboard-o"></i><span class="post-count"> 3.4k</span><span class="post-meta-item-text"> 字</span></span></span><span class="post-time"> | <span class="post-meta-item-icon"><i class="fa fa-hourglass-half"></i><span class="post-count"> 14</span><span class="post-meta-item-text"> 分钟</span></span></span></div><div class="post-content"><h2 id="ClickHouse简介"><a href="#ClickHouse简介" class="headerlink" title="ClickHouse简介"></a>ClickHouse简介</h2><p>ClickHouse是一个用于联机分析(OLAP)的列式数据库管理系统(DBMS)。ClickHouse最初是一款名为Yandex.Metrica的产品，主要用于WEB流量分析。ClickHouse的全称是<strong>Click Stream,Data WareHouse</strong>，简称ClickHouse。</p>
<p>ClickHouse非常适用于商业智能领域，除此之外，它也能够被广泛应用于广告流量、Web、App流量、电信、金融、电子商务、信息安全、网络游戏、物联网等众多其他领域。ClickHouse具有以下特点：</p>
<ul>
<li><p>支持完备的SQL操作</p>
</li>
<li><p>列式存储与数据压缩</p>
</li>
<li><p>向量化执行引擎</p>
</li>
<li><p>关系型模型(与传统数据库类似)</p>
</li>
<li><p>丰富的表引擎</p>
</li>
<li><p>并行处理 </p>
</li>
<li><p>在线查询</p>
</li>
<li><p>数据分片</p>
<p>ClickHouse作为一款高性能OLAP数据库，存在以下不足。</p>
</li>
<li><p>不支持事务。</p>
</li>
<li><p>不擅长根据主键按行粒度进行查询（虽然支持），故不应该把ClickHouse当作Key-Value数据库使用。</p>
</li>
<li><p>不擅长按行删除数据（虽然支持）</p>
</li>
</ul>
<h2 id="单机安装"><a href="#单机安装" class="headerlink" title="单机安装"></a>单机安装</h2><h3 id="下载RPM包"><a href="#下载RPM包" class="headerlink" title="下载RPM包"></a>下载RPM包</h3><p>本文安装方式选择的是离线安装，可以在下面的链接中下载对应的rpm包，也可以直接百度云下载</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">-- rpm包地址</span><br><span class="line">https://packagecloud.io/Altinity/clickhouse</span><br><span class="line">-- 百度云地址</span><br><span class="line">链接：https://pan.baidu.com/s/1pFR66SzLvPYMfcpuPJww5A </span><br><span class="line">提取码：gh5a</span><br></pre></td></tr></table></figure>

<p>在我们安装的软件中包含这些包:</p>
<ul>
<li><code>clickhouse-client</code> 包，包含 clickhouse-client 应用程序，它是交互式ClickHouse控制台客户端。</li>
<li><code>clickhouse-common</code> 包，包含一个ClickHouse可执行文件。</li>
<li><code>clickhouse-server</code> 包，包含要作为服务端运行的ClickHouse配置文件。</li>
</ul>
<p>总共包含四个RPM包，</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">clickhouse-client-19.17.4.11-1.el7.x86_64.rpm</span><br><span class="line">clickhouse-common-static-19.17.4.11-1.el7.x86_64.rpm</span><br><span class="line">clickhouse-server-19.17.4.11-1.el7.x86_64.rpm</span><br><span class="line">clickhouse-server-common-19.17.4.11-1.el7.x86_64.rpm</span><br></pre></td></tr></table></figure>

<blockquote>
<p>尖叫提示：如果安装过程中，报错：依赖检测失败，表示缺少依赖包</p>
<p>可以先手动安装<strong>libicu-50.2-4.el7_7.x86_64.rpm</strong>依赖包</p>
</blockquote>
<h3 id="关闭防火墙"><a href="#关闭防火墙" class="headerlink" title="关闭防火墙"></a>关闭防火墙</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment">## 查看防火墙状态。</span></span><br><span class="line">systemctl status firewalld</span><br><span class="line"><span class="comment">## 临时关闭防火墙命令。重启电脑后，防火墙自动起来。</span></span><br><span class="line">systemctl stop firewalld</span><br><span class="line"><span class="comment">## 永久关闭防火墙命令。重启后，防火墙不会自动启动。</span></span><br><span class="line">systemctl <span class="built_in">disable</span> firewalld</span><br></pre></td></tr></table></figure>

<h3 id="系统要求"><a href="#系统要求" class="headerlink" title="系统要求"></a>系统要求</h3><p>ClickHouse可以在任何具有x86_64，AArch64或PowerPC64LE CPU架构的Linux，FreeBSD或Mac OS X上运行。虽然预构建的二进制文件通常是为x86  _64编译并利用SSE 4.2指令集，但除非另有说明，否则使用支持它的CPU将成为额外的系统要求。这是检查当前CPU是否支持SSE 4.2的命令：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">grep -q sse4_2 /proc/cpuinfo &amp;&amp; <span class="built_in">echo</span> <span class="string">"SSE 4.2 supported"</span> || <span class="built_in">echo</span> <span class="string">"SSE 4.2 not supported"</span></span><br><span class="line">SSE 4.2 supported</span><br></pre></td></tr></table></figure>

<p>要在不支持SSE 4.2或具有AArch64或PowerPC64LE体系结构的处理器上运行ClickHouse，应该<a href="https://clickhouse.tech/docs/zh/getting-started/install/#from-sources" target="_blank" rel="noopener">通过源构建ClickHouse</a>进行适当的配置调整。</p>
<h3 id="安装RPM包"><a href="#安装RPM包" class="headerlink" title="安装RPM包"></a>安装RPM包</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment">## 将rpm包上传至/opt/software目录下</span></span><br><span class="line"><span class="comment">## 执行如下命令进行安装</span></span><br><span class="line">[root@cdh06 software]<span class="comment"># rpm -ivh *.rpm</span></span><br><span class="line">错误：依赖检测失败：</span><br><span class="line">        libicudata.so.50()(64bit) 被 clickhouse-common-static-19.17.4.11-1.el7.x86_64 需要</span><br><span class="line">        libicui18n.so.50()(64bit) 被 clickhouse-common-static-19.17.4.11-1.el7.x86_64 需要</span><br><span class="line">        libicuuc.so.50()(64bit) 被 clickhouse-common-static-19.17.4.11-1.el7.x86_64 需要</span><br><span class="line">        libicudata.so.50()(64bit) 被 clickhouse-server-19.17.4.11-1.el7.x86_64 需要</span><br><span class="line">        libicui18n.so.50()(64bit) 被 clickhouse-server-19.17.4.11-1.el7.x86_64 需要</span><br><span class="line">        libicuuc.so.50()(64bit) 被 clickhouse-server-19.17.4.11-1.el7.x86_64 需要</span><br><span class="line"><span class="comment">## 上面安装报错，缺少相应的依赖包，</span></span><br><span class="line"><span class="comment">## 需要下载相对应的依赖包</span></span><br><span class="line"><span class="comment">## 下载libicu-50.2-4.el7_7.x86_64.rpm进行安装即可</span></span><br></pre></td></tr></table></figure>

<p><img src="//jiamaoxiang.top/2020/09/13/篇一-ClickHouse快速入门/ck%E5%AE%89%E8%A3%85.png" alt></p>
<h3 id="查看安装信息"><a href="#查看安装信息" class="headerlink" title="查看安装信息"></a>查看安装信息</h3><h4 id="目录结构"><a href="#目录结构" class="headerlink" title="目录结构"></a>目录结构</h4><ul>
<li><p><strong>/etc/clickhouse-server</strong>：服务端的配置文件目录，包括全局配置config.xml和用户配置users.xml等。</p>
</li>
<li><p><strong>/etc/clickhouse-client</strong>：客户端配置，包括conf.d文件夹和config.xml文件。</p>
</li>
<li><p><strong>/var/lib/clickhouse</strong>：默认的数据存储目录（通常会修改默认路径配置，将数据保存到大容量磁盘挂载的路径）。</p>
</li>
<li><p><strong>/var/log/clickhouse-server</strong>：默认保存日志的目录（通常会修改路径配置，将日志保存到大容量磁盘挂载的路径）。</p>
</li>
</ul>
<h4 id="配置文件"><a href="#配置文件" class="headerlink" title="配置文件"></a>配置文件</h4><ul>
<li><strong>/etc/security/limits.d/clickhouse.conf</strong>：文件句柄数量的配置</li>
</ul>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">[root@cdh06 clickhouse-server]<span class="comment"># cat /etc/security/limits.d/clickhouse.conf </span></span><br><span class="line">clickhouse      soft    nofile  262144</span><br><span class="line">clickhouse      hard    nofile  262144</span><br></pre></td></tr></table></figure>

<p>该配置也可以通过config.xml的max_open_files修改</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- Set limit on number of open files (default: maximum). This setting makes sense on Mac OS X because getrlimit() fails to retrieve correct maximum value. --&gt;</span></span><br><span class="line">   <span class="comment">&lt;!-- &lt;max_open_files&gt;262144&lt;/max_open_files&gt; --&gt;</span></span><br></pre></td></tr></table></figure>

<ul>
<li><strong>/etc/cron.d/clickhouse-server:cron</strong>：定时任务配置，用于恢复因异常原因中断的ClickHouse服务进程，其默认的配置如下。</li>
</ul>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">[root@cdh06 cron.d]<span class="comment"># cat /etc/cron.d/clickhouse-server</span></span><br><span class="line"><span class="comment">#*/10 * * * * root (which service &gt; /dev/null 2&gt;&amp;1 &amp;&amp; (service clickhouse-server condstart ||:)) || /etc/init.d/clickhouse-server condstart &gt; /dev/null 2&gt;&amp;1</span></span><br></pre></td></tr></table></figure>

<h4 id="可执行文件"><a href="#可执行文件" class="headerlink" title="可执行文件"></a>可执行文件</h4><p>最后是一组在/usr/bin路径下的可执行文件：</p>
<ul>
<li><p><strong>clickhouse</strong>：主程序的可执行文件。</p>
</li>
<li><p><strong>clickhouse-client</strong>：一个指向ClickHouse可执行文件的软链接，供客户端连接使用。</p>
</li>
<li><p><strong>clickhouse-server</strong>：一个指向ClickHouse可执行文件的软链接，供服务端启动使用。</p>
</li>
<li><p><strong>clickhouse-compressor</strong>：内置提供的压缩工具，可用于数据的正压反解。</p>
</li>
</ul>
<p><img src="//jiamaoxiang.top/2020/09/13/篇一-ClickHouse快速入门/%E5%91%BD%E4%BB%A4%E7%A8%8B%E5%BA%8F.png" alt></p>
<h3 id="启动-关闭服务"><a href="#启动-关闭服务" class="headerlink" title="启动/关闭服务"></a>启动/关闭服务</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment">## 启动服务</span></span><br><span class="line">[root@cdh06 ~]<span class="comment"># service clickhouse-server start</span></span><br><span class="line">Start clickhouse-server service: Path to data directory <span class="keyword">in</span> /etc/clickhouse-server/config.xml: /var/lib/clickhouse/</span><br><span class="line">DONE</span><br><span class="line"><span class="comment">## 关闭服务</span></span><br><span class="line">[root@cdh06 ~]<span class="comment"># service clickhouse-server stop</span></span><br></pre></td></tr></table></figure>

<h3 id="客户端连接"><a href="#客户端连接" class="headerlink" title="客户端连接"></a>客户端连接</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">[root@cdh06 ~]<span class="comment"># clickhouse-client </span></span><br><span class="line">ClickHouse client version 19.17.4.11.</span><br><span class="line">Connecting to localhost:9000 as user default.</span><br><span class="line">Connected to ClickHouse server version 19.17.4 revision 54428.</span><br><span class="line"></span><br><span class="line">cdh06 :) show databases;</span><br><span class="line"></span><br><span class="line">SHOW DATABASES</span><br><span class="line"></span><br><span class="line">┌─name────┐</span><br><span class="line">│ default │</span><br><span class="line">│ system  │</span><br><span class="line">└─────────┘</span><br><span class="line"></span><br><span class="line">2 rows <span class="keyword">in</span> <span class="built_in">set</span>. Elapsed: 0.004 sec.</span><br></pre></td></tr></table></figure>

<h3 id="基本操作"><a href="#基本操作" class="headerlink" title="基本操作"></a>基本操作</h3><h4 id="创建数据库"><a href="#创建数据库" class="headerlink" title="创建数据库"></a>创建数据库</h4><ul>
<li>语法</li>
</ul>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">DATABASE</span> [<span class="keyword">IF</span> <span class="keyword">NOT</span> <span class="keyword">EXISTS</span>] db_name [<span class="keyword">ON</span> CLUSTER cluster] [<span class="keyword">ENGINE</span> = <span class="keyword">engine</span>(...)]</span><br></pre></td></tr></table></figure>

<ul>
<li>例子</li>
</ul>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">DATABASE</span> <span class="keyword">IF</span> <span class="keyword">NOT</span> <span class="keyword">EXISTS</span> tutorial</span><br></pre></td></tr></table></figure>

<p>默认情况下，ClickHouse使用的是原生的数据库引擎<strong>Ordinary</strong>(在此数据库下可以使用任意类型的<strong>表引擎</strong>，<strong>在绝大多数情况下都只需使用默认的数据库引擎</strong>)。当然也可以使用<strong>Lazy</strong>引擎和<strong>MySQL</strong>引擎，比如使用MySQL引擎，可以直接在ClickHouse中操作MySQL对应数据库中的表。假设MySQL中存在一个名为clickhouse的数据库，可以使用下面的方式连接MySQL数据库。</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="comment">-- --------------------------语法-----------------------------------</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">DATABASE</span> [<span class="keyword">IF</span> <span class="keyword">NOT</span> <span class="keyword">EXISTS</span>] db_name [<span class="keyword">ON</span> CLUSTER cluster]</span><br><span class="line"><span class="keyword">ENGINE</span> = MySQL(<span class="string">'host:port'</span>, [<span class="string">'database'</span> | <span class="keyword">database</span>], <span class="string">'user'</span>, <span class="string">'password'</span>)</span><br><span class="line"><span class="comment">-- --------------------------示例------------------------------------</span></span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">DATABASE</span> mysql_db <span class="keyword">ENGINE</span> = MySQL(<span class="string">'192.168.200.241:3306'</span>, <span class="string">'clickhouse'</span>, <span class="string">'root'</span>, <span class="string">'123qwe'</span>);</span><br><span class="line"><span class="comment">-- ---------------------------操作-----------------------------------</span></span><br><span class="line">cdh06 :) <span class="keyword">use</span> mysql_db;</span><br><span class="line">cdh06 :) <span class="keyword">show</span> <span class="keyword">tables</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">SHOW</span> <span class="keyword">TABLES</span></span><br><span class="line"></span><br><span class="line">┌─<span class="keyword">name</span>─┐</span><br><span class="line">│ <span class="keyword">test</span> │</span><br><span class="line">└──────┘</span><br><span class="line"></span><br><span class="line"><span class="number">1</span> <span class="keyword">rows</span> <span class="keyword">in</span> set. Elapsed: <span class="number">0.005</span> sec. </span><br><span class="line"></span><br><span class="line">cdh06 :) <span class="keyword">select</span> * <span class="keyword">from</span> <span class="keyword">test</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">SELECT</span> *</span><br><span class="line"><span class="keyword">FROM</span> <span class="keyword">test</span></span><br><span class="line"></span><br><span class="line">┌─<span class="keyword">id</span>─┬─<span class="keyword">name</span>──┐</span><br><span class="line">│  <span class="number">1</span> │ tom   │</span><br><span class="line">│  <span class="number">2</span> │ jack  │</span><br><span class="line">│  <span class="number">3</span> │ lihua │</span><br><span class="line">└────┴───────┘</span><br><span class="line"></span><br><span class="line"><span class="number">3</span> <span class="keyword">rows</span> <span class="keyword">in</span> set. Elapsed: <span class="number">0.047</span> sec.</span><br></pre></td></tr></table></figure>

<h4 id="创建表"><a href="#创建表" class="headerlink" title="创建表"></a>创建表</h4><ul>
<li>语法</li>
</ul>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> [<span class="keyword">IF</span> <span class="keyword">NOT</span> <span class="keyword">EXISTS</span>] [db.]table_name [<span class="keyword">ON</span> CLUSTER cluster]</span><br><span class="line">(</span><br><span class="line">    name1 [type1] [<span class="keyword">DEFAULT</span>|<span class="keyword">MATERIALIZED</span>|<span class="keyword">ALIAS</span> expr1] [compression_codec] [TTL expr1],</span><br><span class="line">    name2 [type2] [<span class="keyword">DEFAULT</span>|<span class="keyword">MATERIALIZED</span>|<span class="keyword">ALIAS</span> expr2] [compression_codec] [TTL expr2],</span><br><span class="line">    ...</span><br><span class="line">) <span class="keyword">ENGINE</span> = <span class="keyword">engine</span></span><br></pre></td></tr></table></figure>

<ul>
<li>示例</li>
</ul>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="comment">-- 注意首字母大写</span></span><br><span class="line"><span class="comment">-- 建表</span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> <span class="keyword">test</span>(</span><br><span class="line">    <span class="keyword">id</span> Int32,</span><br><span class="line">    <span class="keyword">name</span> <span class="keyword">String</span></span><br><span class="line">) <span class="keyword">engine</span>=<span class="keyword">Memory</span>;</span><br></pre></td></tr></table></figure>

<p>上面命令创建了一张内存表，即使用Memory引擎。表引擎决定了数据表的特性，也决定了数据将会被如何存储及加载。Memory引擎是ClickHouse最简单的表引擎，数据只会被保存在内存中，在服务重启时数据会丢失。</p>
<h2 id="集群安装"><a href="#集群安装" class="headerlink" title="集群安装"></a>集群安装</h2><h3 id="安装步骤"><a href="#安装步骤" class="headerlink" title="安装步骤"></a>安装步骤</h3><p>上面介绍了单机安装的基本步骤和ClickHouse客户端的基本使用。接下来将介绍集群的安装方式。ClickHouse集群安装非常简单，首先重复上面步骤，分别在其他机器上安装ClickHouse，然后再分别配置一下<strong>/etc/clickhouse-server/config.xml</strong>和<strong>/etc/metrika.xml</strong>两个文件即可。值得注意的是，ClickHouse集群的依赖于<strong>Zookeeper</strong>，所以要保证先安装好Zookeeper集群，zk集群的安装步骤非常简单，本文不会涉及。本文演示三个节点的ClickHouse集群安装，具体步骤如下：</p>
<ul>
<li><p>首先，重复单机安装的步骤，分别在另外两台机器安装ClickHouse</p>
</li>
<li><p>然后，在每台机器上修改<strong>/etc/clickhouse-server/config.xml</strong>文件</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 如果禁用了ipv6，使用下面配置--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">listen_host</span>&gt;</span>0.0.0.0<span class="tag">&lt;/<span class="name">listen_host</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 如果没有禁用ipv6，使用下面配置</span></span><br><span class="line"><span class="comment">&lt;listen_host&gt;::&lt;/listen_host&gt;</span></span><br><span class="line"><span class="comment">--&gt;</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>尖叫提示（1）：</p>
<p>在禁用了ipv6时，如果使用<listen_host>::</listen_host>配置，会报如下错误</p>
<p><error> Application: DB::Exception: Listen [::]:8123 failed: Poco::Exception. Code: 1000, e.code() =0, e.displayText() = DNS error: EAI: -9</error></p>
<p>尖叫提示（2）：</p>
<p>ClickHouse默认的tcp端口号是9000，如果存在端口冲突，可以在<strong>/etc/clickhouse-server/config.xml</strong>文件中修改 端口号<tcp_port>9001</tcp_port></p>
</blockquote>
</li>
<li><p>最后在/etc下创建<strong>metrika.xml</strong>文件，内容如下，下面配置是<strong>不包含副本的分片配置</strong>，我们还可以为分片配置多个副本</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">yandex</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 该标签与config.xml的&lt;remote_servers incl="clickhouse_remote_servers" &gt;保持一致</span></span><br><span class="line"><span class="comment"> --&gt;</span>    </span><br><span class="line"><span class="tag">&lt;<span class="name">clickhouse_remote_servers</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 集群名称，可以修改 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">cluster_3shards_1replicas</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- 配置三个分片，每个分片对应一台机器--&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">shard</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">replica</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">host</span>&gt;</span>cdh04<span class="tag">&lt;/<span class="name">host</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">port</span>&gt;</span>9001<span class="tag">&lt;/<span class="name">port</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">replica</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">shard</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">shard</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">replica</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">host</span>&gt;</span>cdh05<span class="tag">&lt;/<span class="name">host</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">port</span>&gt;</span>9001<span class="tag">&lt;/<span class="name">port</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">replica</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">shard</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">shard</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">replica</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">host</span>&gt;</span>cdh06<span class="tag">&lt;/<span class="name">host</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">port</span>&gt;</span>9001<span class="tag">&lt;/<span class="name">port</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">replica</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">shard</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">cluster_3shards_1replicas</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">clickhouse_remote_servers</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 该标签与config.xml的&lt;zookeeper incl="zookeeper-servers" optional="true" /&gt;</span></span><br><span class="line"><span class="comment">保持一致</span></span><br><span class="line"><span class="comment"> --&gt;</span> </span><br><span class="line"><span class="tag">&lt;<span class="name">zookeeper-servers</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">node</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">host</span>&gt;</span>cdh02<span class="tag">&lt;/<span class="name">host</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">port</span>&gt;</span>2181<span class="tag">&lt;/<span class="name">port</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">node</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">node</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">host</span>&gt;</span>cdh03<span class="tag">&lt;/<span class="name">host</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">port</span>&gt;</span>2181<span class="tag">&lt;/<span class="name">port</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">node</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">node</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">host</span>&gt;</span>cdh06<span class="tag">&lt;/<span class="name">host</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">port</span>&gt;</span>2181<span class="tag">&lt;/<span class="name">port</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">node</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">zookeeper-servers</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 分片和副本标识，shard标签配置分片编号，&lt;replica&gt;配置分片副本主机名</span></span><br><span class="line"><span class="comment">  需要修改对应主机上的配置--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">macros</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">shard</span>&gt;</span>01<span class="tag">&lt;/<span class="name">shard</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">replica</span>&gt;</span>cdh04<span class="tag">&lt;/<span class="name">replica</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">macros</span>&gt;</span>    </span><br><span class="line"><span class="tag">&lt;/<span class="name">yandex</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>分别在各自的机器上启动clickhouse-server</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># service clickhouse-server start</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>（可选配置）修改<strong>/etc/clickhouse-client/config.xml</strong>文件</p>
<p>由于clickhouse-client默认连接的主机是localhost，默认连接的端口号是9000，由于我们修改了默认的端口号，所以需要修改客户端默认连接的端口号，在该文件里添加如下内容：</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">port</span>&gt;</span>9001<span class="tag">&lt;/<span class="name">port</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>当然也可以不用修改，但是记得在使用客户端连接时，加上<strong>–port 9001</strong>参数指明要连接的端口号，否则会报错：</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">Connecting to localhost:9000 as user default.</span><br><span class="line">Code: 210. DB::NetException: Connection refused (localhost:9000)</span><br></pre></td></tr></table></figure>

</li>
</ul>
<h3 id="基本操作-1"><a href="#基本操作-1" class="headerlink" title="基本操作"></a>基本操作</h3><h4 id="验证集群"><a href="#验证集群" class="headerlink" title="验证集群"></a>验证集群</h4><p>在完成上述配置之后，在各自机器上启动clickhouse-server，并开启clickhouse-clent</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">// 启动server</span><br><span class="line"><span class="comment"># service clickhouse-server start</span></span><br><span class="line">// 启动客户端，-m参数支持多行输入</span><br><span class="line"><span class="comment"># clickhouse-client -m</span></span><br></pre></td></tr></table></figure>

<p>可以查询系统表验证集群配置是否已被加载：</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">cdh04 :) <span class="keyword">select</span> cluster,shard_num,replica_num,host_name,port,<span class="keyword">user</span> <span class="keyword">from</span> system.clusters;</span><br></pre></td></tr></table></figure>

<p><img src="//jiamaoxiang.top/2020/09/13/篇一-ClickHouse快速入门/%E9%9B%86%E7%BE%A4%E9%85%8D%E7%BD%AE.png" alt></p>
<p>接下来再来看一下集群的分片信息(宏变量)：分别在各自机器上执行下面命令：</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">cdh04 :) <span class="keyword">select</span> * <span class="keyword">from</span> system.macros;</span><br><span class="line">┌─macro───┬─substitution─┐</span><br><span class="line">│ replica │ cdh04        │</span><br><span class="line">│ shard   │ 01           │</span><br><span class="line">└─────────┴──────────────┘</span><br><span class="line"></span><br><span class="line">cdh05 :) <span class="keyword">select</span> * <span class="keyword">from</span> system.macros;</span><br><span class="line">┌─macro───┬─substitution─┐</span><br><span class="line">│ replica │ cdh05        │</span><br><span class="line">│ shard   │ 02           │</span><br><span class="line">└─────────┴──────────────┘</span><br><span class="line"></span><br><span class="line">cdh06 :) <span class="keyword">select</span> * <span class="keyword">from</span> system.macros;</span><br><span class="line">┌─macro───┬─substitution─┐</span><br><span class="line">│ replica │ cdh06        │</span><br><span class="line">│ shard   │ 03           │</span><br><span class="line">└─────────┴──────────────┘</span><br></pre></td></tr></table></figure>

<h4 id="分布式DDL操作"><a href="#分布式DDL操作" class="headerlink" title="分布式DDL操作"></a>分布式DDL操作</h4><p>默认情况下，CREATE、DROP、ALTER、RENAME操作仅仅在当前执行该命令的server上生效。在集群环境下，可以使用<strong>ON CLUSTER</strong>语句，这样就可以在整个集群发挥作用。</p>
<p>比如创建一张分布式表：</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> <span class="keyword">IF</span> <span class="keyword">NOT</span> <span class="keyword">EXISTS</span> user_cluster <span class="keyword">ON</span> CLUSTER cluster_3shards_1replicas</span><br><span class="line">(</span><br><span class="line">    <span class="keyword">id</span> Int32,</span><br><span class="line">    <span class="keyword">name</span> <span class="keyword">String</span></span><br><span class="line">)<span class="keyword">ENGINE</span> = <span class="keyword">Distributed</span>(cluster_3shards_1replicas, <span class="keyword">default</span>, user_local,<span class="keyword">id</span>);</span><br></pre></td></tr></table></figure>

<p><strong>Distributed表引擎的定义形式如下所示</strong>：关于ClickHouse的表引擎，后续文章会做详细解释。</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">Distributed(cluster_name, database_name, table_name[, sharding_key])</span><br></pre></td></tr></table></figure>

<p>各个参数的含义分别如下：</p>
<ul>
<li><strong>cluster_name</strong>：集群名称，与集群配置中的自定义名称相对应。</li>
<li><strong>database_name</strong>：数据库名称</li>
<li><strong>table_name</strong>：表名称</li>
<li><strong>sharding_key</strong>：可选的，用于分片的key值，在数据写入的过程中，分布式表会依据分片key的规则，将数据分布到各个节点的本地表。</li>
</ul>
<blockquote>
<p>尖叫提示：</p>
<p>创建分布式表是<strong>读时检查的机制</strong>，也就是说对<strong>创建分布式表和本地表的顺序并没有强制要求</strong>。</p>
<p>同样值得注意的是，在上面的语句中使用了ON CLUSTER分布式DDL，这意味着在集群的每个分片节点上，都会创建一张Distributed表，这样便可以从其中任意一端发起对所有分片的读、写请求。</p>
</blockquote>
<p>创建完成上面的分布式表时，在每台机器上查看表，发现每台机器上都存在一张刚刚创建好的表。</p>
<p>接下来就需要创建本地表了，在每台机器上分别创建一张本地表：</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> <span class="keyword">IF</span> <span class="keyword">NOT</span> <span class="keyword">EXISTS</span> user_local </span><br><span class="line">(</span><br><span class="line">    <span class="keyword">id</span> Int32,</span><br><span class="line">    <span class="keyword">name</span> <span class="keyword">String</span></span><br><span class="line">)<span class="keyword">ENGINE</span> = MergeTree()</span><br><span class="line"><span class="keyword">ORDER</span> <span class="keyword">BY</span> <span class="keyword">id</span></span><br><span class="line"><span class="keyword">PARTITION</span> <span class="keyword">BY</span> <span class="keyword">id</span></span><br><span class="line">PRIMARY <span class="keyword">KEY</span> <span class="keyword">id</span>;</span><br></pre></td></tr></table></figure>

<p>我们先在一台机器上，对user_local表进行插入数据，然后再查询user_cluster表</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="comment">-- 插入数据</span></span><br><span class="line">cdh04 :) <span class="keyword">INSERT</span> <span class="keyword">INTO</span> user_local <span class="keyword">VALUES</span>(<span class="number">1</span>,<span class="string">'tom'</span>),(<span class="number">2</span>,<span class="string">'jack'</span>);</span><br><span class="line"><span class="comment">-- 查询user_cluster表,可见通过user_cluster表可以操作所有的user_local表</span></span><br><span class="line">cdh04 :) <span class="keyword">select</span> * <span class="keyword">from</span> user_cluster;</span><br><span class="line">┌─id─┬─name─┐</span><br><span class="line">│  2 │ jack │</span><br><span class="line">└────┴──────┘</span><br><span class="line">┌─id─┬─name─┐</span><br><span class="line">│  1 │ tom  │</span><br><span class="line">└────┴──────┘</span><br></pre></td></tr></table></figure>

<p>接下来，我们再向user_cluster中插入一些数据，观察user_local表数据变化，可以发现数据被分散存储到了其他节点上了。</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="comment">-- 向user_cluster插入数据</span></span><br><span class="line">cdh04 :)  <span class="keyword">INSERT</span> <span class="keyword">INTO</span> user_cluster <span class="keyword">VALUES</span>(<span class="number">3</span>,<span class="string">'lilei'</span>),(<span class="number">4</span>,<span class="string">'lihua'</span>); </span><br><span class="line"><span class="comment">-- 查看user_cluster数据</span></span><br><span class="line">cdh04 :) <span class="keyword">select</span> * <span class="keyword">from</span> user_cluster;</span><br><span class="line">┌─id─┬─name─┐</span><br><span class="line">│  2 │ jack │</span><br><span class="line">└────┴──────┘</span><br><span class="line">┌─id─┬─name──┐</span><br><span class="line">│  3 │ lilei │</span><br><span class="line">└────┴───────┘</span><br><span class="line">┌─id─┬─name─┐</span><br><span class="line">│  1 │ tom  │</span><br><span class="line">└────┴──────┘</span><br><span class="line">┌─id─┬─name──┐</span><br><span class="line">│  4 │ lihua │</span><br><span class="line">└────┴───────┘</span><br><span class="line"></span><br><span class="line"><span class="comment">-- 在cdh04上查看user_local</span></span><br><span class="line">cdh04 :) <span class="keyword">select</span> * <span class="keyword">from</span> user_local;</span><br><span class="line">┌─id─┬─name─┐</span><br><span class="line">│  2 │ jack │</span><br><span class="line">└────┴──────┘</span><br><span class="line">┌─id─┬─name──┐</span><br><span class="line">│  3 │ lilei │</span><br><span class="line">└────┴───────┘</span><br><span class="line">┌─id─┬─name─┐</span><br><span class="line">│  1 │ tom  │</span><br><span class="line">└────┴──────┘</span><br><span class="line"><span class="comment">-- 在cdh05上查看user_local</span></span><br><span class="line">cdh05 :) <span class="keyword">select</span> * <span class="keyword">from</span> user_local;</span><br><span class="line">┌─id─┬─name──┐</span><br><span class="line">│  4 │ lihua │</span><br><span class="line">└────┴───────┘</span><br></pre></td></tr></table></figure>

<h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p>本文首先介绍了ClickHouse的基本特点和使用场景，接着阐述了ClickHouse单机版与集群版离线安装步骤，并给出了ClickHouse的简单使用案例。本文是ClickHouse的一个简单入门，在接下来的分享中，会逐步深入探索ClickHouse的世界。</p>
<blockquote>
<p>公众号『大数据技术与数仓』，回复『资料』领取大数据资料包</p>
</blockquote>
</div><div class="recommended_posts"><h3>相关推荐 ☟</h3><li><a href="https://jiamaoxiang.top/2020/10/14/篇三-ClickHouse的数据类型/" target="_blank">篇三|ClickHouse的数据类型</a></li><li><a href="https://jiamaoxiang.top/2020/09/14/篇二-什么是ClickHouse的表引擎/" target="_blank">篇二|什么是ClickHouse的表引擎?</a></li><li><a href="https://jiamaoxiang.top/2020/09/08/面试-Kafka常见面试问题总结/" target="_blank">面试|Kafka常见面试问题总结</a></li><li><a href="https://jiamaoxiang.top/2020/09/07/Hive-SQL使用过程中的奇怪现象/" target="_blank">Hive SQL使用过程中的奇怪现象</a></li></div><div><ul class="post-copyright"><li class="post-copyright-author"><strong>本文作者：</strong>Jia MaoXiang</li><li class="post-copyright-link"><strong>本文链接：</strong><a href="/2020/09/13/篇一-ClickHouse快速入门/">https://jiamaoxiang.top/2020/09/13/篇一-ClickHouse快速入门/</a></li><li class="post-copyright-license"><strong>版权声明：</strong>本文为博主原创文章，遵循CC BY-SA 4.0版权协议，转载请附上原文出处链接和本声明</li></ul></div><br><script type="text/javascript" src="/js/share.js?v=0.0.0" async></script><a class="article-share-link" data-url="https://jiamaoxiang.top/2020/09/13/篇一-ClickHouse快速入门/" data-id="ckkatihtb006o907qb3ajtrwh" data-qrcode="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAN4AAADeCAAAAAB3DOFrAAACtUlEQVR42u3aQW4jMQwEQP//097rAknsblIKHKDmZGSdGdUsIDFNPh7x9Xx5/fTN/3/y9fPX38rvc/jCw8PDu7D0BPbTN9snvl5D+7rx8PDw7vFeb9bJppy8mte/9fq5swMGDw8P79N4ySbe1rqb++Ph4eF9Pi9ZaBI0tCQ8PDy8T+C1S5w9Mg8XkrL7cNaCh4eHF/PyLtLnfL7S38PDw8Nbd9WTzTqPZffHT71aPDw8vAu8WeTaFtBnG2ntOvHw8PBu8NqNeBYHbO5zoA2Gh4eHd4jXRp95Wysfvcrvk4e8zSmBh4eH1/FeP+BswZ0PBMzAb/4P8fDw8A7x2ub9rN+UxLubhlxxjuHh4eEd5eVRbPKAJJiYxbhFkIGHh4d3gZds6Pno1b5c3syOvQkj8PDw8A7x2odtXsG++m0PEjw8PLwbvDYm2JfIm+g2CZ2/+QkeHh7eUV4SpM7GqtpyOWnCJa8JDw8P7zav3YLzOLVttiVH0bCFhoeHh3eNN2syJYfKrI/fvuhopgwPDw/vEC8PCDZl8SZomN0ZDw8P73d4++Gq2bhAstG3/4qHh4d3mzdr2J8NXqPFLdaMh4eHt+e1UwZtJPGMryujCXh4eHi/yGuL3TxumF1tk+wxyzbw8PDw4j7UvVGqfXTbYr75LTw8PLxrvPxzHkxsIt3Z8EExv4CHh4e35uUbdN6Iau/WDjFE38HDw8O7xmu371k424525UHGapoMDw8PL+Y9yyspbfPGWFvEJyEFHh4e3m3erAW1D3+Tkro9YDYNNjw8PLyWNzsMZu+s3dYT9pv14OHh4V3jtYXvqYGt9sjJ2294eHh4n8PLo4e8LJ4dJNEpgIeHh/eneLM2W15SRy8LDw8P7xovL3xbxuwY2AfEeHh4ePd4B/7gj7f1zdFyYEQADw8Pb8v7BxOY7gOafsxNAAAAAElFTkSuQmCC">分享</a><div class="tags"><a href="/tags/ClickHouse/">ClickHouse</a></div><div class="post-nav"><a class="pre" href="/2020/09/14/篇二-什么是ClickHouse的表引擎/">篇二|什么是ClickHouse的表引擎?</a><a class="next" href="/2020/09/08/面试-Kafka常见面试问题总结/">面试|Kafka常见面试问题总结</a></div></div></div></div><div class="pure-u-1-4 hidden_mid_and_down"><div id="sidebar-toc"><div class="stoc-article" id="sidebar-stoc"><strong class="stoc-title"><i class="fa fa-list-ul"> 目录</i></strong><div class="toc-nav" id="stoc"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#ClickHouse简介"><span class="toc-number">1.</span> <span class="toc-text">ClickHouse简介</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#单机安装"><span class="toc-number">2.</span> <span class="toc-text">单机安装</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#下载RPM包"><span class="toc-number">2.1.</span> <span class="toc-text">下载RPM包</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#关闭防火墙"><span class="toc-number">2.2.</span> <span class="toc-text">关闭防火墙</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#系统要求"><span class="toc-number">2.3.</span> <span class="toc-text">系统要求</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#安装RPM包"><span class="toc-number">2.4.</span> <span class="toc-text">安装RPM包</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#查看安装信息"><span class="toc-number">2.5.</span> <span class="toc-text">查看安装信息</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#目录结构"><span class="toc-number">2.5.1.</span> <span class="toc-text">目录结构</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#配置文件"><span class="toc-number">2.5.2.</span> <span class="toc-text">配置文件</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#可执行文件"><span class="toc-number">2.5.3.</span> <span class="toc-text">可执行文件</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#启动-关闭服务"><span class="toc-number">2.6.</span> <span class="toc-text">启动/关闭服务</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#客户端连接"><span class="toc-number">2.7.</span> <span class="toc-text">客户端连接</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#基本操作"><span class="toc-number">2.8.</span> <span class="toc-text">基本操作</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#创建数据库"><span class="toc-number">2.8.1.</span> <span class="toc-text">创建数据库</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#创建表"><span class="toc-number">2.8.2.</span> <span class="toc-text">创建表</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#集群安装"><span class="toc-number">3.</span> <span class="toc-text">集群安装</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#安装步骤"><span class="toc-number">3.1.</span> <span class="toc-text">安装步骤</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#基本操作-1"><span class="toc-number">3.2.</span> <span class="toc-text">基本操作</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#验证集群"><span class="toc-number">3.2.1.</span> <span class="toc-text">验证集群</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#分布式DDL操作"><span class="toc-number">3.2.2.</span> <span class="toc-text">分布式DDL操作</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#总结"><span class="toc-number">4.</span> <span class="toc-text">总结</span></a></li></ol></div></div></div></div><div class="pure-u-1 pure-u-md-3-4"><div id="footer">Copyright © 2018 - 2021 <a href="/." rel="nofollow">Jmx's Blog.</a>All rights reserved.<br>Thoughts on technology, life and everything else.</div></div></div><script type="text/javascript" src="/js/toc.js?v=0.0.0"></script><a class="show" id="rocket" href="#top"></a><script type="text/javascript" src="/js/totop.js?v=0.0.0" async></script><script type="text/javascript" src="//lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.js" async></script><script type="text/javascript" src="/js/fancybox.js?v=0.0.0" async></script><link rel="stylesheet" type="text/css" href="//lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.css"><script type="text/javascript" src="/js/search.js?v=0.0.0"></script><script>var search_path = 'search.xml';
if (search_path.length == 0) {
   search_path = 'search.xml';
}
var path = '/' + search_path;
searchFunc(path, 'local-search-input', 'local-search-result');
</script><script type="text/javascript" color="100,99,98" opacity="0.5" zindex="0.7" count="150" src="//lib.baomitu.com/canvas-nest.js/2.0.4/canvas-nest.umd.js"></script><script type="text/javascript" src="/js/codeblock-resizer.js?v=0.0.0"></script><script type="text/javascript" src="/js/smartresize.js?v=0.0.0"></script></div></body></html>