<!DOCTYPE html><html lang="zh-CN"><head><meta name="generator" content="Hexo 3.9.0"><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description" content="记录朴实无华且枯燥的生活"><title>基于SparkStreaming的日志分析项目 | Jmx's Blog</title><link rel="stylesheet" type="text/css" href="/css/style.css?v=0.0.0"><link rel="stylesheet" type="text/css" href="//lib.baomitu.com/normalize/8.0.1/normalize.min.css"><link rel="stylesheet" type="text/css" href="//lib.baomitu.com/pure/1.0.0/pure-min.css"><link rel="stylesheet" type="text/css" href="//lib.baomitu.com/pure/1.0.0/grids-responsive-min.css"><link rel="stylesheet" href="//lib.baomitu.com/font-awesome/4.7.0/css/font-awesome.min.css"><script type="text/javascript" src="//lib.baomitu.com/jquery/3.4.0/jquery.min.js"></script><link rel="icon" mask sizes="any" href="/favicon.ico"><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"><link rel="alternate" type="application/atom+xml" href="/atom.xml"><script>var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = 'https://hm.baidu.com/hm.js?' + '912b6cfc43243cd27aeb428f7dbf7823';
  var s = document.getElementsByTagName("script")[0];
  s.parentNode.insertBefore(hm, s);
  })();</script><script type="text/javascript" src="/js/toc.js?v=0.0.0"></script></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">基于SparkStreaming的日志分析项目</h1><a id="logo" href="/.">Jmx's Blog</a><p class="description">Keep it Simple and Stupid!</p></div><div id="nav-menu"><a class="current" href="/."><i class="fa fa-home"> 首页</i></a><a href="/archives/"><i class="fa fa-archive"> 归档</i></a><a href="/about/"><i class="fa fa-pied-piper-alt"> 关于</i></a><a href="/tags"><i class="fa fa-tags"> 标签</i></a><a href="/atom.xml"><i class="fa fa-rss"> 订阅</i></a></div></div><div class="pure-g" id="layout"><div class="pure-u-1 pure-u-md-3-4"><div class="content_container"><div class="post"><h1 class="post-title">基于SparkStreaming的日志分析项目</h1><div class="post-meta">Aug 26, 2019<span> | </span><span class="category"><a href="/categories/Spark/">Spark</a></span><script src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" async></script><span id="busuanzi_container_page_pv"> | <span id="busuanzi_value_page_pv"></span><span> 阅读</span></span><span class="post-time"><span class="post-meta-item-text"> | </span><span class="post-meta-item-icon"><i class="fa fa-keyboard-o"></i><span class="post-count"> 1.4k</span><span class="post-meta-item-text"> 字</span></span></span><span class="post-time"> | <span class="post-meta-item-icon"><i class="fa fa-hourglass-half"></i><span class="post-count"> 6</span><span class="post-meta-item-text"> 分钟</span></span></span></div><div class="post-content"><p>&emsp;&emsp;基于SparkStreaming实现实时的日志分析，首先基于discuz搭建一个论坛平台，然后将该论坛的日志写入到指定文件，最后通过SparkStreaming实时对日志进行分析。</p>
<a id="more"></a>

<h1 id="需求分析"><a href="#需求分析" class="headerlink" title="需求分析"></a>需求分析</h1><ul>
<li>统计指定时间段的热门文章</li>
<li>统计指定时间段内的最受欢迎的用户（以 ip 为单位）</li>
<li>统计指定时间段内的不同模块的访问量<h1 id="项目架构"><a href="#项目架构" class="headerlink" title="项目架构"></a>项目架构</h1><img src="//jiamaoxiang.top/2019/08/26/基于SparkStreaming的日志分析项目/%E9%A1%B9%E7%9B%AE%E6%9E%B6%E6%9E%84.png" alt><h1 id="代码分析"><a href="#代码分析" class="headerlink" title="代码分析"></a>代码分析</h1>resources<br>&emsp;&emsp;&emsp;&emsp;access_log.txt:日志样例<br>&emsp;&emsp;&emsp;&emsp;log_sta.conf ：配置文件<br>scala.com.jmx.analysis<br>&emsp;&emsp;&emsp;&emsp;AccessLogParser.scala :日志解析<br>&emsp;&emsp;&emsp;&emsp;logAnalysis：日志分析<br>scala.com.jmx.util<br>&emsp;&emsp;&emsp;&emsp;Utility.scala:工具类  </li>
</ul>
<p>scala<br>&emsp;&emsp;&emsp;&emsp;Run：驱动程序(main)  </p>
<p>具体代码详见<a href="https://github.com/jiamx/log_analysis" target="_blank" rel="noopener">github</a></p>
<h1 id="搭建discuz论坛"><a href="#搭建discuz论坛" class="headerlink" title="搭建discuz论坛"></a>搭建discuz论坛</h1><h3 id="安装XAMPP"><a href="#安装XAMPP" class="headerlink" title="安装XAMPP"></a>安装XAMPP</h3><h4 id="下载"><a href="#下载" class="headerlink" title="下载"></a>下载</h4><pre><code>wget https://www.apachefriends.org/xampp-files/5.6.33/xampp-linux-x64-5.6.33-0-installer.run</code></pre><h4 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h4><pre><code># 赋予文件执行权限
chmod u+x xampp-linux-x64-5.6.33-0-installer.run
# 运行安装文件
./xampp-linux-x64-5.6.33-0-installer.run</code></pre><h4 id="配置环境变量"><a href="#配置环境变量" class="headerlink" title="配置环境变量"></a>配置环境变量</h4><p>&emsp;&emsp;将以下内容加入到 ~/.bash_profile  </p>
<pre><code>export XAMPP=/opt/lampp/
export PATH=$PATH:$XAMPP:$XAMPP/bin</code></pre><h4 id="刷新环境变量"><a href="#刷新环境变量" class="headerlink" title="刷新环境变量"></a>刷新环境变量</h4><pre><code>source ~/.bash_profile</code></pre><h4 id="启动XAMPP"><a href="#启动XAMPP" class="headerlink" title="启动XAMPP"></a>启动XAMPP</h4><pre><code>xampp restart</code></pre><h3 id="root用户密码和权限修改"><a href="#root用户密码和权限修改" class="headerlink" title="root用户密码和权限修改"></a>root用户密码和权限修改</h3><pre><code>mysql –uroot # 安装的mysql的root用户默认没有密码，且只能本地登录
# 修改root用户密码为123
update mysql.user set password=PASSWORD(&apos;123&apos;) where user=&apos;root&apos;;
flush privileges;
# 赋予root用户远程登录权限
grant all privileges on *.* to &apos;root&apos;@&apos;%&apos; identified by &apos;123&apos; with grant option;
flush privileges;</code></pre><h3 id="安装Discuz"><a href="#安装Discuz" class="headerlink" title="安装Discuz"></a>安装Discuz</h3><h4 id="下载discuz"><a href="#下载discuz" class="headerlink" title="下载discuz"></a>下载discuz</h4><pre><code>wget http://download.comsenz.com/DiscuzX/3.2/Discuz_X3.2_SC_UTF8.zip</code></pre><h4 id="安装-1"><a href="#安装-1" class="headerlink" title="安装"></a>安装</h4><pre><code># 删除原有的web应用
rm -rf /opt/lampp/htdocs/*
unzip Discuz_X3.2_SC_UTF8.zip –d /opt/lampp/htdocs/
cd /opt/lampp/htdocs/
mv upload/* .
# 修改目录权限
chmod 777 -R /opt/lampp/htdocs/config/
chmod 777 -R /opt/lampp/htdocs/data/
chmod 777 -R /opt/lampp/htdocs/uc_client/
chmod 777 -R /opt/lampp/htdocs/uc_server/</code></pre><h3 id="Discuz基本操作"><a href="#Discuz基本操作" class="headerlink" title="Discuz基本操作"></a>Discuz基本操作</h3><h4 id="自定义版块"><a href="#自定义版块" class="headerlink" title="自定义版块"></a>自定义版块</h4><ol>
<li>进入discuz后台：<a href="http://slave1/admin.php" target="_blank" rel="noopener">http://slave1/admin.php</a></li>
</ol>
<ol>
<li>点击顶部的“论坛”菜单</li>
</ol>
<ol>
<li>按照页面提示创建所需版本，可以创建父子版块）<h4 id="查看访问日志"><a href="#查看访问日志" class="headerlink" title="查看访问日志"></a>查看访问日志</h4>&emsp;&emsp;日志默认地址<br>  <code>/opt/lampp/logs/access_log</code><br>&emsp;&emsp;实时查看日志命令<br> <code>tail –f /opt/lampp/logs/access_log</code><h3 id="Discuz帖子-版块存储简介"><a href="#Discuz帖子-版块存储简介" class="headerlink" title="Discuz帖子/版块存储简介"></a>Discuz帖子/版块存储简介</h3> mysql -uroot -p123 ultrax # 登录ultrax数据库<br> 查看包含帖子id及标题对应关系的表<h1 id="tid-subject（文章id、标题）"><a href="#tid-subject（文章id、标题）" class="headerlink" title="tid, subject（文章id、标题）"></a>tid, subject（文章id、标题）</h1> select tid, subject from pre_forum_post limit 10;<h1 id="fid-name（版块id、标题）"><a href="#fid-name（版块id、标题）" class="headerlink" title="fid, name（版块id、标题）"></a>fid, name（版块id、标题）</h1> select fid, name from pre_forum_forum limit 40;<h3 id="修改日志格式"><a href="#修改日志格式" class="headerlink" title="修改日志格式"></a>修改日志格式</h3><h4 id="登录安装网站的服务器"><a href="#登录安装网站的服务器" class="headerlink" title="登录安装网站的服务器"></a>登录安装网站的服务器</h4>&emsp;&emsp;网站安装在slave1服务器上，并且是以root用户安装的，所以需要以root用户登录slave1服务器</li>
</ol>
<h4 id="找到Apache配置文件"><a href="#找到Apache配置文件" class="headerlink" title="找到Apache配置文件"></a>找到Apache配置文件</h4><p>&emsp;&emsp;Apache配置文件名称为httpd.conf，所在目录为 /opt/lampp/etc/ ，完整路径为 /opt/lampp/etc/httpd.conf</p>
<h4 id="修改日志格式-1"><a href="#修改日志格式-1" class="headerlink" title="修改日志格式"></a>修改日志格式</h4><p>&emsp;&emsp;关闭通用日志文件的使用  </p>
<pre><code>CustomLog &quot;logs/access_log&quot; common</code></pre><p>&emsp;&emsp;启用组合日志文件  </p>
<pre><code>CustomLog &quot;logs/access_log&quot; combined</code></pre><p>&emsp;&emsp;重新加载配置文件  </p>
<pre><code>xampp reload</code></pre><p>&emsp;&emsp;检查访问日志  </p>
<pre><code>tail -f /opt/lampp/logs/access_log</code></pre><h3 id="Flume与Kafka配置"><a href="#Flume与Kafka配置" class="headerlink" title="Flume与Kafka配置"></a>Flume与Kafka配置</h3><p>&emsp;&emsp;Flume agent的配置文件为:<br>    # agent的名称为a1<br>    a1.sources = source1<br>    a1.channels = channel1<br>    a1.sinks = sink1<br><br>    # set source<br>    #a1.sources.source1.type = spooldir<br>    a1.sources.source1.type = TAILDIR<br>    a1.sources.source1.filegroups = f1<br>    a1.sources.source1.filegroups.f1 = /opt/lampp/logs/access_log<br>    a1sources.source1.fileHeader = flase<br><br>    # set sink<br>    a1.sinks.sink1.type = org.apache.flume.sink.kafka.KafkaSink<br>    #a1.sinks.sink1.kafka.bootstrap.servers = master:9092,slave1:9092,slave2:9092<br>    a1.sinks.sink1.brokerList= master:9092,slave1:9092,slave2:9092<br>    a1.sinks.sink1.topic= aboutyunlog<br>    a1.sinks.sink1.kafka.flumeBatchSize = 20<br>    a1.sinks.sink1.kafka.producer.acks = 1<br>    a1.sinks.sink1.kafka.producer.linger.ms = 1<br>    a1.sinks.sink1.kafka.producer.compression.type = snappy<br><br>    # set channel<br>    a1.channels.channel1.type = file<br>    a1.channels.channel1.checkpointDir = /home/aboutyun/data/flume_data/checkpoint<br>    a1.channels.channel1.dataDirs= /home/aboutyun/data/flume_data/data<br><br>    # bind<br>    a1.sources.source1.channels = channel1<br>    a1.sinks.sink1.channel = channel1</p>
<p>&emsp;&emsp;创建所依赖目录  </p>
<pre><code>mkdir -p /home/aboutyun/data/flume_data/checkpoint
mkdir -p /home/aboutyun/data/flume_data/data</code></pre><h3 id="创建MySQL数据库和所需要的表"><a href="#创建MySQL数据库和所需要的表" class="headerlink" title="创建MySQL数据库和所需要的表"></a>创建MySQL数据库和所需要的表</h3><h4 id="创建数据库"><a href="#创建数据库" class="headerlink" title="创建数据库"></a>创建数据库</h4><pre><code>CREATE DATABASE `statistics` CHARACTER SET &apos;utf8&apos; COLLATE &apos;utf8_general_ci&apos;;</code></pre><h4 id="创建表"><a href="#创建表" class="headerlink" title="创建表"></a>创建表</h4><pre><code>1.    特定时间段内不同ip的访问次数：client_ip_access
CREATE TABLE `client_ip_access` (
                        `client_ip` text COMMENT &apos;客户端ip&apos;,
                         `sum` bigint(20) NOT NULL COMMENT &apos;访问次数&apos;,
                         `time` text NOT NULL  COMMENT &apos;统计时间&apos;
                     ) ENGINE=InnoDB DEFAULT CHARSET=utf8;

 2.    特定时间段内不同文章的访问次数：hot_article
CREATE TABLE `hot_article` (
                       `article_id` text COMMENT &apos;文章id&apos;,
                       `subject` text NOT NULL COMMENT &apos;文章标题&apos;,
                       `sum` bigint(20) NOT NULL COMMENT &apos;访问次数&apos;,
                      `time` text NOT NULL COMMENT &apos;统计时间&apos;
                    ) ENGINE=InnoDB DEFAULT CHARSET=utf8;

 3.    特定时间段内不同版块的访问次数：hot_section
CREATE TABLE `hot_section` (
                  `section_id` text COMMENT &apos;版块id&apos;,
                  `name` text NOT NULL COMMENT &apos;版块标题&apos;,
                   `sum` bigint(20) NOT NULL COMMENT &apos;访问次数&apos;,
                  `time` text NOT NULL COMMENT &apos;统计时间&apos;
                  ) ENGINE=InnoDB DEFAULT CHARSET=utf8;</code></pre><h3 id="打包部署存在的问题"><a href="#打包部署存在的问题" class="headerlink" title="打包部署存在的问题"></a>打包部署存在的问题</h3><h4 id="问题1"><a href="#问题1" class="headerlink" title="问题1"></a>问题1</h4><pre><code>Exception in thread &quot;main&quot; java.lang.SecurityException: Invalid signature file digest for Manifest main attributes</code></pre><h4 id="解决方式"><a href="#解决方式" class="headerlink" title="解决方式"></a>解决方式</h4><pre><code>原因：
 使用sbt打包的时候导致某些包的重复引用，所以打包之后的META-INF的目录下多出了一些*.SF,*.DSA,*.RSA文件
解决办法：
删除掉多于的*.SF,*.DSA,*.RSA文件
zip -d aboutyun_log_analysis_apache.jar META-INF/*.RSA META-INF/*.DSA META-INF/*.SF</code></pre><h4 id="问题2"><a href="#问题2" class="headerlink" title="问题2"></a>问题2</h4><pre><code>Exception in thread &quot;main&quot; java.io.FileNotFoundException: File file:/data/spark_data/history/event-log does not exist</code></pre><h4 id="解决方式-1"><a href="#解决方式-1" class="headerlink" title="解决方式"></a>解决方式</h4><pre><code>原因：
由于spark的spark-defaults.conf配置文件中配置 eventLog 时指定的路径在本机不存在。
解决办法：
创建对应的文件夹，并赋予对应权限
sudo mkdir -p /data/spark_data/history/spark-events 
sudo mkdir -p /data/spark_data/history/event-log 
sudo chmod 777 -R /data</code></pre></div><div class="recommended_posts"><h3>相关推荐 ☟</h3><li><a href="https://jiamaoxiang.top/2019/08/23/Flink的状态后端-State-Backends/" target="_blank">Flink的状态后端(State Backends)</a></li><li><a href="https://jiamaoxiang.top/2019/08/19/运维与监控/" target="_blank">Flink自学系列教程之--运维与监控(七)</a></li><li><a href="https://jiamaoxiang.top/2019/08/19/集群与部署/" target="_blank">Flink自学系列教程之--集群与部署(六)</a></li><li><a href="https://jiamaoxiang.top/2019/08/19/source-sink-Connectors/" target="_blank">Flink自学系列教程之--source/sink Connectors(五)</a></li></div><div><ul class="post-copyright"><li class="post-copyright-author"><strong>本文作者：</strong>Jia MaoXiang</li><li class="post-copyright-link"><strong>本文链接：</strong><a href="/2019/08/26/基于SparkStreaming的日志分析项目/">https://jiamaoxiang.top/2019/08/26/基于SparkStreaming的日志分析项目/</a></li><li class="post-copyright-license"><strong>版权声明：</strong>本文为博主原创文章，遵循CC BY-SA 4.0版权协议，转载请附上原文出处链接和本声明</li></ul></div><br><script type="text/javascript" src="/js/share.js?v=0.0.0" async></script><a class="article-share-link" data-url="https://jiamaoxiang.top/2019/08/26/基于SparkStreaming的日志分析项目/" data-id="cjzru8fiz000eyo7q7l32b0rv" data-qrcode="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAN4AAADeCAAAAAB3DOFrAAACtElEQVR42u3aQW7cMBAEQP//0841QLDa7hnS3gClUxBIWhYNcKjmfH3F1/c/19//n9/z6qnnt716z7ELDw8Pbz30V69O7nxmJM/ux4OHh4f3M7xkcM9PPQ/ied1O7k+KBB4eHt5n8pJtdLIJbgsMHh4e3v/OG25wR+xfKAx4eHh4AS/5+M+DiXwK8s309awFDw8Pr1uro1Okz/n3lfM9PDw8vPWper7EzzbH+ab5e3Th4eHh3eDlC+6mpSAJMtotfjJOPDw8vHu8JBg9GwQ8H5Ul4HrzjYeHh3eIlx/2580ByVDaN7TvjGYRDw8Pb83Lw4I8gNg0IhyOIfDw8PAu8/IwYlNy8slq27bw8PDw7vHa6GEDzmFtBFxstfHw8PAO8U7FB/ut8ywCLv5ieHh4eEd5G/b+mH+zdX7zi3h4eHgXeHkIuykVs6O15BfrIzE8PDy8BS8PW9ugYRZtJO8pNv14eHh4F3izrXNbeWZL/GayVl8GeHh4eOX5VBIr7OPd/HdnT+Hh4eHd5s0aBWbtrUWz6WLD/aZpFQ8PD2/Ny3+4PaaahQj5JCZTjIeHh3eDl89BG8JuSkXbIhB1RuDh4eGtee0SnG+126uNOaLmLTw8PLwLvFl/Vn6U1RaYpB2hHjMeHh7eBV5bJL5GV4LM44Z2QvHw8PDO8pJBz4pHW2ZmBSDqhsDDw8O7wJtFqzlmFtTOjsrw8PDwfoY3C3bbYeXgU1EFHh4e3lne2WOqfImfBR/5dODh4eHd47UhbPLSdujJRKzCCDw8PLwLvFkxaAOLFjlrR3j5xYCHh4d3gdceeuWtVJuAow0j3vSU4eHh4X0Mb9NY0B6JtQUDDw8P73N4ecEYnsuNwo6ipwwPDw9vzds3B8zuOdWY9aYw4OHh4R3l7T/4k8V6P2X72AIPDw9vzfsDlsvaTz9LKsgAAAAASUVORK5CYII=">分享</a><div class="tags"><a href="/tags/Spark/">Spark</a></div><div class="post-nav"><a class="next" href="/2019/08/23/Flink的状态后端-State-Backends/">Flink的状态后端(State Backends)</a></div></div></div></div><div class="pure-u-1-4 hidden_mid_and_down"><div id="sidebar-toc"><div class="stoc-article" id="sidebar-stoc"><strong class="stoc-title"><i class="fa fa-list-ul"> 目录</i></strong><div class="toc-nav" id="stoc"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#需求分析"><span class="toc-number">1.</span> <span class="toc-text">需求分析</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#项目架构"><span class="toc-number">2.</span> <span class="toc-text">项目架构</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#代码分析"><span class="toc-number">3.</span> <span class="toc-text">代码分析</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#搭建discuz论坛"><span class="toc-number">4.</span> <span class="toc-text">搭建discuz论坛</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#安装XAMPP"><span class="toc-number">4.0.1.</span> <span class="toc-text">安装XAMPP</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#下载"><span class="toc-number">4.0.1.1.</span> <span class="toc-text">下载</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#安装"><span class="toc-number">4.0.1.2.</span> <span class="toc-text">安装</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#配置环境变量"><span class="toc-number">4.0.1.3.</span> <span class="toc-text">配置环境变量</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#刷新环境变量"><span class="toc-number">4.0.1.4.</span> <span class="toc-text">刷新环境变量</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#启动XAMPP"><span class="toc-number">4.0.1.5.</span> <span class="toc-text">启动XAMPP</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#root用户密码和权限修改"><span class="toc-number">4.0.2.</span> <span class="toc-text">root用户密码和权限修改</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#安装Discuz"><span class="toc-number">4.0.3.</span> <span class="toc-text">安装Discuz</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#下载discuz"><span class="toc-number">4.0.3.1.</span> <span class="toc-text">下载discuz</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#安装-1"><span class="toc-number">4.0.3.2.</span> <span class="toc-text">安装</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Discuz基本操作"><span class="toc-number">4.0.4.</span> <span class="toc-text">Discuz基本操作</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#自定义版块"><span class="toc-number">4.0.4.1.</span> <span class="toc-text">自定义版块</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#查看访问日志"><span class="toc-number">4.0.4.2.</span> <span class="toc-text">查看访问日志</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Discuz帖子-版块存储简介"><span class="toc-number">4.0.5.</span> <span class="toc-text">Discuz帖子/版块存储简介</span></a></li></ol></li></ol><li class="toc-item toc-level-1"><a class="toc-link" href="#tid-subject（文章id、标题）"><span class="toc-number">5.</span> <span class="toc-text">tid, subject（文章id、标题）</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#fid-name（版块id、标题）"><span class="toc-number">6.</span> <span class="toc-text">fid, name（版块id、标题）</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#修改日志格式"><span class="toc-number">6.0.1.</span> <span class="toc-text">修改日志格式</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#登录安装网站的服务器"><span class="toc-number">6.0.1.1.</span> <span class="toc-text">登录安装网站的服务器</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#找到Apache配置文件"><span class="toc-number">6.0.1.2.</span> <span class="toc-text">找到Apache配置文件</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#修改日志格式-1"><span class="toc-number">6.0.1.3.</span> <span class="toc-text">修改日志格式</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Flume与Kafka配置"><span class="toc-number">6.0.2.</span> <span class="toc-text">Flume与Kafka配置</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#创建MySQL数据库和所需要的表"><span class="toc-number">6.0.3.</span> <span class="toc-text">创建MySQL数据库和所需要的表</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#创建数据库"><span class="toc-number">6.0.3.1.</span> <span class="toc-text">创建数据库</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#创建表"><span class="toc-number">6.0.3.2.</span> <span class="toc-text">创建表</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#打包部署存在的问题"><span class="toc-number">6.0.4.</span> <span class="toc-text">打包部署存在的问题</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#问题1"><span class="toc-number">6.0.4.1.</span> <span class="toc-text">问题1</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#解决方式"><span class="toc-number">6.0.4.2.</span> <span class="toc-text">解决方式</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#问题2"><span class="toc-number">6.0.4.3.</span> <span class="toc-text">问题2</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#解决方式-1"><span class="toc-number">6.0.4.4.</span> <span class="toc-text">解决方式</span></a></li></ol></li></ol></li></div></div></div></div><div class="pure-u-1 pure-u-md-3-4"><div id="footer">Copyright © 2018 - 2019 <a href="/." rel="nofollow">Jmx's Blog.</a>All rights reserved.<br>Thoughts on technology, life and everything else.</div></div></div><script type="text/javascript" src="/js/toc.js?v=0.0.0"></script><a class="show" id="rocket" href="#top"></a><script type="text/javascript" src="/js/totop.js?v=0.0.0" async></script><script type="text/javascript" src="//lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.js" async></script><script type="text/javascript" src="/js/fancybox.js?v=0.0.0" async></script><link rel="stylesheet" type="text/css" href="//lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.css"><script type="text/javascript" src="/js/search.js?v=0.0.0"></script><script>var search_path = 'search.xml';
if (search_path.length == 0) {
   search_path = 'search.xml';
}
var path = '/' + search_path;
searchFunc(path, 'local-search-input', 'local-search-result');
</script><script type="text/javascript" color="100,99,98" opacity="0.5" zindex="0.7" count="150" src="//lib.baomitu.com/canvas-nest.js/2.0.4/canvas-nest.umd.js"></script><script type="text/javascript" src="/js/codeblock-resizer.js?v=0.0.0"></script><script type="text/javascript" src="/js/smartresize.js?v=0.0.0"></script></div></body></html>